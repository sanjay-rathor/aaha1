<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apollo Allied Health Academy CMS Dashboard</title>
    <link rel="icon" href="/images/favicon-apkn.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts for clean look -->
    <link href="https://fonts.googleapis.com/css?family=Inter:400,600&display=swap" rel="stylesheet">
    <script src="dashboard.js"></script>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
    <style>
        /* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #f8fafc;
    color: #334155;
    line-height: 1.6;
    overflow-x: hidden;
}

/* Header Styles */
.header {
    background: linear-gradient(135deg, #1e3b36 0%, #335355 100%);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 2rem;
    height: 70px;
    max-width: 1400px;
    margin: 0 auto;
}

/* Logo Section */
.logo {
    display: flex;
    align-items: center;
    color: white;
    font-weight: 700;
    font-size: 22px;
    letter-spacing: 1px;
    min-width: 40px;
    height: 70px;
}

.logo img {
    width: 140px;
    height: auto;
    background: transparent;
    padding: 0;
    box-shadow: none;
    border: none;
    display: block;
    margin: auto 0;
}

/* Navigation */
nav {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    align-items: center;
}

.nav-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    backdrop-filter: blur(10px);
}

.nav-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    transform: translateY(-1px);
}

.nav-btn.active {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(59, 196, 246, 0.3);
}

/* Logout Button */
.logout-btn {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border: none;
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

.logout-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
}

/* Main Content */
main {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
    min-height: calc(100vh - 70px);
}

/* Section Headers */
section h2 {
    font-size: 28px;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 12px;
}

section h2::before {
    content: '';
    width: 4px;
    height: 28px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border-radius: 2px;
}

/* View Live Site Link */
.view-live-site {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    text-decoration: none;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}

.view-live-site:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

/* Dashboard Overview Grid */
.dashboard-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
}

/* Dashboard Widgets */
.dashboard-widget {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.dashboard-widget::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
}

.dashboard-widget:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

.widget-label {
    font-size: 12px;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.widget-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 4px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.dashboard-widget h3 {
    font-size: 14px;
    font-weight: 500;
    color: #64748b;
}

/* Analytics Section */
.dashboard-analytics {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.analytics-card {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
}

.analytics-card h4 {
    font-size: 16px;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #f1f5f9;
}

.analytics-iframe {
    width: 100%;
    height: 300px;
    border: none;
    border-radius: 8px;
    background: #f8fafc;
}

.analytics-bar {
    width: 100%;
    height: 300px;
}

/* Form and List Container */
.form-and-list-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-top: 1.5rem;
}

/* Form Container */
.form-container {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
    height: fit-content;
}

.form-container h3 {
    font-size: 18px;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #f1f5f9;
}

/* Form Styles */
.input-group {
    margin-bottom: 1.5rem;
}

.input-group label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: #374151;
    margin-bottom: 0.5rem;
}

.input-group input,
.input-group textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s ease;
    background: #ffffff;
}

.input-group input:focus,
.input-group textarea:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.input-group small {
    display: block;
    font-size: 12px;
    color: #64748b;
    margin-top: 0.25rem;
}

/* Form Actions */
.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 2rem;
}

.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
}

.btn-secondary {
    background: #f1f5f9;
    color: #64748b;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.btn-secondary:hover {
    background: #e2e8f0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* List Container */
.list-container {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
    height: fit-content;
}

.list-container h3 {
    font-size: 18px;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #f1f5f9;
}

/* List Styles */
ul {
    list-style: none;
}

.list-item-placeholder {
    padding: 1rem;
    background: #f8fafc;
    border-radius: 8px;
    color: #64748b;
    text-align: center;
    font-style: italic;
}

/* Message Styles */
[id$="-message"] {
    margin-top: 1rem;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
}

.success-message {
    background: #f0fdf4;
    border: 1px solid #bbf7d0;
    color: #16a34a;
}

.error-message {
    background: #fef2f2;
    border: 1px solid #fecaca;
    color: #dc2626;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .header-content {
        padding: 0 1rem;
        flex-wrap: wrap;
        height: auto;
        min-height: 70px;
        gap: 1rem;
    }
    
    nav {
        order: 3;
        width: 100%;
        justify-content: center;
        padding: 1rem 0;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .form-and-list-container {
        grid-template-columns: 1fr;
    }
    
    .dashboard-analytics {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    main {
        padding: 1rem;
    }
    
    .dashboard-overview {
        grid-template-columns: 1fr;
    }
    
    .nav-btn {
        font-size: 12px;
        padding: 8px 12px;
    }
    
    .form-container,
    .list-container {
        padding: 1.5rem;
    }
    
    .widget-value {
        font-size: 2rem;
    }
}

@media (max-width: 480px) {
    .header-content {
        padding: 0 0.5rem;
    }
    
    .logo {
        font-size: 16px;
    }
    
    .logo img {
        width: 32px;
        height: 32px;
    }
    
    nav {
        gap: 2px;
    }
    
    .nav-btn {
        font-size: 11px;
        padding: 6px 8px;
    }
    
    section h2 {
        font-size: 24px;
    }
    
    .form-actions {
        flex-direction: column;
    }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
    body {
        background: #0f172a;
        color: #e2e8f0;
    }
    
    .dashboard-widget,
    .analytics-card,
    .form-container,
    .list-container {
        background: #1e293b;
        border-color: #334155;
    }
    
    .input-group input,
    .input-group textarea {
        background: #334155;
        border-color: #475569;
        color: #e2e8f0;
    }
    
    .list-item-placeholder {
        background: #334155;
        color: #94a3b8;
    }
}

/* Loading States */
.loading {
    opacity: 0.6;
    pointer-events: none;
    position: relative;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid #e5e7eb;
    border-top: 2px solid #3b82f6;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Accessibility */
.nav-btn:focus,
.btn:focus,
.input-group input:focus,
.input-group textarea:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
}

/* Print Styles */
@media print {
    .header,
    .form-actions,
    .logout-btn {
        display: none;
    }
    
    main {
        padding: 0;
    }
    
    .dashboard-widget,
    .analytics-card {
        break-inside: avoid;
        box-shadow: none;
        border: 1px solid #ccc;
    }
}
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="/images/ak_logo.png" alt="Apollo Logo">
            </div>
            <nav>
                <button class="nav-btn active" data-section="dashboard-home">Dashboard</button>
                <button class="nav-btn" data-section="hero-section-management">Hero Slides</button>
                <button class="nav-btn" data-section="programs-hero-management">Programs Hero</button>
                <button class="nav-btn" data-section="hp-ourprograms-meta-management">Programs Meta</button>
                <button class="nav-btn" data-section="program-cards-management">Program Cards</button>
                <button class="nav-btn" data-section="accreditations-management">Accreditations</button>
                <button class="nav-btn" data-section="global-connections-management">Global Connections</button>
                <button class="nav-btn" data-section="centers-list-management">Centers</button>
            </nav>
            <button id="logout-button" class="logout-btn">Logout</button>
        </div>
    </header>

    <main>
        <!-- Dashboard Home (Analytics Widgets) -->
        <section id="dashboard-home">
            <a class="view-live-site" href="/" target="_blank">View Live Site</a>
            <h2>Dashboard Overview</h2>
            <div class="dashboard-overview">
            <div class="dashboard-widget">
                <div class="widget-label">Google Analytics</div>
                <div class="widget-value" id="widget-site-views">0</div>
                <h3>Site Views</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label">Avg. Load Time</div>
                <div class="widget-value" id="widget-performance">-</div>
                <h3>Performance</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label">User Interactions</div>
                <div class="widget-value" id="widget-clicks">0</div>
                <h3>Clicks</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label"></div>
                <div class="widget-value" id="widget-hero-slides">0</div>
                <h3>Total Hero Slides</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label"></div>
                <div class="widget-value" id="widget-programs">0</div>
                <h3>Total Programs</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label"></div>
                <div class="widget-value" id="widget-program-cards">0</div>
                <h3>Program Cards</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label"></div>
                <div class="widget-value" id="widget-accreditations">0</div>
                <h3>Accreditations</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label"></div>
                <div class="widget-value" id="widget-global-connections">0</div>
                <h3>Global Connections</h3>
            </div>
            <div class="dashboard-widget">
                <div class="widget-label"></div>
                <div class="widget-value" id="widget-centers">0</div>
                <h3>Centers</h3>
            </div>
            </div>
            <div class="dashboard-analytics">
            <div class="analytics-card">
                <h4>Site Views (Google Analytics)</h4>
                <!-- Replace src with your Google Analytics embed -->
                <iframe class="analytics-iframe" src="https://datastudio.google.com/embed/reporting/1d2e3f4g5h6i7j8k9l/page/1M" allowfullscreen></iframe>
            </div>
            <div class="analytics-card">
                <h4>Site Performance (Bar Graph)</h4>
                <canvas id="performance-bar-graph" class="analytics-bar"></canvas>
            </div>
            <div class="analytics-card">
                <h4>Clicks & Interactions</h4>
                <iframe class="analytics-iframe" src="https://datastudio.google.com/embed/reporting/2a3b4c5d6e7f8g9h0i/page/1M" allowfullscreen></iframe>
            </div>
            <div class="analytics-card">
                <h4>Traffic Sources</h4>
                <iframe class="analytics-iframe" src="https://datastudio.google.com/embed/reporting/3a4b5c6d7e8f9g0h1i/page/1M" allowfullscreen></iframe>
            </div>
            </div>
        </section>

       <section id="hero-section-management">
            <h2>Hero Section Slides</h2>
            <p>Manage slides for the homepage hero carousel.</p>

            <div class="form-and-list-container">
                <div class="form-container hero-form-container">
                    <h3 id="hero-form-title">Add New Hero Slide</h3>
                    <form id="hero-form">
                        <input type="hidden" id="hero-slideId" name="slideId">

                        <div class="input-group">
                            <label for="hero-heading">Heading</label>
                            <input type="text" id="hero-heading" name="heading" required>
                        </div>

                        <div class="input-group">
                            <label for="hero-paragraph">Paragraph</label>
                            <textarea id="hero-paragraph" name="paragraph" rows="3" required></textarea>
                        </div>

                        <div class="input-group">
                            <label for="hero-button1-text">Button 1 Text</label>
                            <input type="text" id="hero-button1-text" name="button1Text" required>
                        </div>

                        <div class="input-group">
                            <label for="hero-button1-url">Button 1 URL</label>
                            <input type="text" id="hero-button1-url" name="button1Url" required>
                        </div>

                        <div class="input-group">
                            <label for="hero-button2-text">Button 2 Text</label>
                            <input type="text" id="hero-button2-text" name="button2Text">
                        </div>

                        <div class="input-group">
                            <label for="hero-button2-url">Button 2 URL</label>
                            <input type="text" id="hero-button2-url" name="button2Url">
                        </div>

                        <div class="input-group">
                            <label for="hero-button3-text">Button 3 Text</label>
                            <input type="text" id="hero-button3-text" name="button3Text">
                        </div>

                        <div class="input-group">
                            <label for="hero-button3-url">Button 3 URL</label>
                            <input type="text" id="hero-button3-url" name="button3Url">
                        </div>
                        
                        <div class="input-group">
                            <label for="hero-order">Order</label>
                            <input type="number" id="hero-order" name="order" min="1" value="1" required>
                        </div>

                        <div class="input-group">
                            <label for="hero-image-url">Slide Image URL</label>
                            <input type="text" id="hero-image-url" name="heroImageUrl" placeholder="Enter image URL (e.g., https://example.com/image.jpg)">
                            <small>Enter the full URL of the image. Ensure the image is hosted and publicly accessible.</small>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" id="hero-save-button" class="btn">Save Slide</button>
                            <button type="button" id="hero-cancel-edit-button" class="btn btn-secondary" style="display: none;">Cancel Edit</button>
                        </div>
                         <p id="hero-form-error" class="error-message" style="display: none;"></p>
                         <p id="hero-form-success" class="success-message" style="display: none;"></p>
                    </form>
                </div>

                <div class="list-container hero-list-container">
                    <h3>Existing Hero Slides</h3>
                    <ul id="hero-slides-list">
                        <!-- Slides will be dynamically loaded here -->
                        <li class="list-item-placeholder">No slides found. Add one using the form.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="programs-hero-management">
            <h2>Programs Page Hero</h2>
            <p>Manage the hero title and paragraph for the main programs page.</p>
            <div class="form-container programs-hero-form-container">
                 <h3>Edit Programs Page Hero</h3>
                <form id="programs-hero-form">
                    <div class="input-group">
                        <label for="programs-hero-title">Hero Title</label>
                        <input type="text" id="programs-hero-title" name="programsHeroTitle" required>
                    </div>
                    <div class="input-group">
                        <label for="programs-hero-paragraph">Hero Paragraph</label>
                        <textarea id="programs-hero-paragraph" name="programsHeroParagraph" rows="4" required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" id="save-programs-hero-button" class="btn">Save Programs Hero</button>
                    </div>
                    <div id="programs-hero-status" style="margin-top: 15px;"></div>
                </form>
            </div>
        </section>

        <section id="hp-ourprograms-meta-management">
            <h2>Homepage "Our Programs" Section Details</h2>
            <p>Manage the title and introductory paragraph for the "Our Programs" section on the homepage.</p>
            <div class="form-container">
                <h3>Edit "Our Programs" Section Meta</h3>
                <form id="hp-ourprograms-meta-form">
                    <div class="input-group">
                        <label for="hp-ourprograms-title">Section Title</label>
                        <input type="text" id="hp-ourprograms-title" name="hpOurProgramsTitle" required>
                    </div>
                    <div class="input-group">
                        <label for="hp-ourprograms-intro">Introductory Paragraph</label>
                        <textarea id="hp-ourprograms-intro" name="hpOurProgramsIntro" rows="4" required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" id="hp-ourprograms-meta-save-button" class="btn">Save Details</button>
                    </div>
                    <div id="hp-ourprograms-meta-status" style="margin-top: 15px;"></div>
                </form>
            </div>
        </section>

        <section id="program-cards-management">
            <h2>Program Cards</h2>
            <p>Manage individual program cards displayed on the homepage and programs page.</p>

            <div class="form-and-list-container">
                <div class="form-container program-card-form-container">
                    <h3 id="program-card-form-title">Add New Program Card</h3>
                    <form id="program-card-form">
                        <input type="hidden" id="program-cardId" name="cardId">

                        <div class="input-group">
                            <label for="program-title">Program Title</label>
                            <input type="text" id="program-title" name="title" required>
                        </div>

                        <div class="input-group">
                            <label for="program-description">Description</label>
                            <textarea id="program-description" name="description" rows="4" required></textarea>
                        </div>
                        
                        <div class="input-group">
                            <label for="program-duration">Program Duration (e.g., "3 Years", "6 Months")</label>
                            <input type="text" id="program-duration" name="duration" required>
                        </div>

                        <div class="input-group">
                            <label for="program-link-url">"Learn More" Link URL (e.g., programs/program-name.html)</label>
                            <input type="text" id="program-link-url" name="linkUrl" required>
                        </div>

                        <div class="input-group">
                            <label for="program-order">Display Order</label>
                            <input type="number" id="program-order" name="order" min="1" value="1" required>
                        </div>

                        <div class="input-group">
                            <label for="program-image-url">Card Image URL</label>
                            <input type="text" id="program-image-url" name="programImageUrl" placeholder="Enter image URL (e.g., https://example.com/image.jpg)">
                            <small>Enter the full URL of the image. Ensure the image is hosted and publicly accessible.</small>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" id="program-card-save-button" class="btn">Save Program Card</button>
                            <button type="button" id="program-card-cancel-edit-button" class="btn btn-secondary" style="display: none;">Cancel Edit</button>
                        </div>
                         <p id="program-card-form-error" class="error-message" style="display: none;"></p>
                         <p id="program-card-form-success" class="success-message" style="display: none;"></p>
                    </form>
                </div>

                <div class="list-container program-card-list-container">
                    <h3>Existing Program Cards</h3>
                    <ul id="program-cards-list">
                        <!-- Program cards will be dynamically loaded here -->
                        <li class="list-item-placeholder">No program cards found. Add one using the form.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="accreditations-management">
            <h2>Accreditations & Affiliations Management</h2>
            <p>Manage accreditation items for the homepage.</p>
            <div class="form-and-list-container">
                <div class="form-container">
                    <h3 id="accreditations-form-title">Add New Accreditation</h3>
                    <form id="accreditations-form">
                        <input type="hidden" id="accreditation-docId" name="docId">
                        <div class="input-group">
                            <label for="accreditation-name">Name</label>
                            <input type="text" id="accreditation-name" name="accreditationName" required>
                        </div>
                        <div class="input-group">
                            <label for="accreditation-logo-url">Logo URL</label>
                            <input type="text" id="accreditation-logo-url" name="accreditationLogoUrl" placeholder="https://example.com/logo.png" required>
                        </div>
                        <div class="input-group">
                            <label for="accreditation-order">Order</label>
                            <input type="number" id="accreditation-order" name="accreditationOrder" min="1" value="1" required>
                        </div>
                        <div class="form-actions">
                            <button type="submit" id="accreditation-save-button" class="btn">Save Accreditation</button>
                            <button type="button" id="accreditation-cancel-edit-button" class="btn btn-secondary" style="display: none;">Cancel Edit</button>
                        </div>
                        <div id="accreditations-status" style="margin-top: 15px;"></div>
                    </form>
                </div>
                <div class="list-container">
                    <h3>Existing Accreditations</h3>
                    <ul id="accreditations-list">
                        <!-- Accreditations will be dynamically loaded here -->
                        <li class="list-item-placeholder">No accreditations found. Add one using the form.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="global-connections-management">
            <h2>Global Connections Management</h2>
            <p>Manage global connection/partnership items for the homepage.</p>
            <div class="form-and-list-container">
                <div class="form-container">
                    <h3 id="gc-form-title">Add New Global Connection</h3>
                    <form id="global-connections-form">
                        <input type="hidden" id="gc-docId" name="docId">
                        <div class="input-group">
                            <label for="gc-name">Name</label>
                            <input type="text" id="gc-name" name="gcName" required>
                        </div>
                        <div class="input-group">
                            <label for="gc-description">Description</label>
                            <textarea id="gc-description" name="gcDescription" rows="3" required></textarea>
                        </div>
                        <div class="input-group">
                            <label for="gc-image-url">Image URL</label>
                            <input type="text" id="gc-image-url" name="gcImageUrl" placeholder="https://example.com/image.jpg" required>
                        </div>
                        <div class="input-group">
                            <label for="gc-order">Order</label>
                            <input type="number" id="gc-order" name="gcOrder" min="1" value="1" required>
                        </div>
                        <div class="form-actions">
                            <button type="submit" id="gc-save-button" class="btn">Save Connection</button>
                            <button type="button" id="gc-cancel-edit-button" class="btn btn-secondary" style="display: none;">Cancel Edit</button>
                        </div>
                        <div id="gc-status" style="margin-top: 15px;"></div>
                    </form>
                </div>
                <div class="list-container">
                    <h3>Existing Global Connections</h3>
                    <ul id="global-connections-list">
                        <!-- Global Connections will be dynamically loaded here -->
                        <li class="list-item-placeholder">No connections found. Add one using the form.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="centers-list-management">
            <h2>Centers List Management</h2>
            <p>Manage the list of centers for the homepage and centers listing page.</p>
            <div class="form-and-list-container">
                <div class="form-container">
                    <h3 id="center-form-title">Add New Center</h3>
                    <form id="centers-form">
                        <input type="hidden" id="center-docId" name="docId">
                        <div class="input-group">
                            <label for="center-name">Center Name</label>
                            <input type="text" id="center-name" name="centerName" required>
                        </div>
                        <div class="input-group">
                            <label for="center-image-url">Image URL</label>
                            <input type="text" id="center-image-url" name="centerImageUrl" placeholder="https://example.com/center.jpg" required>
                        </div>
                        <div class="input-group">
                            <label for="center-description">Description</label>
                            <textarea id="center-description" name="centerDescription" rows="3" required></textarea>
                        </div>
                        <div class="input-group">
                            <label for="center-page-url">Page URL</label>
                            <input type="text" id="center-page-url" name="centerPageUrl" placeholder="centres/chennai/" required>
                            <small>Relative URL to the center's detail page (e.g., centres/chennai/ or centres/chennai/index.html)</small>
                        </div>
                        <div class="input-group">
                            <label for="center-map-embed-code">Map Embed Code (iframe)</label>
                            <textarea id="center-map-embed-code" name="mapEmbedCode" rows="4"></textarea>
                            <small>Paste the full iframe code from Google Maps (Share > Embed a map).</small>
                        </div>
                        <div class="input-group">
                            <label for="center-address">Address</label>
                            <textarea id="center-address" name="centerAddress" rows="3"></textarea>
                        </div>
                        <div class="input-group">
                            <label for="center-mobile">Mobile No</label>
                            <input type="text" id="center-mobile" name="centerMobile">
                        </div>
                        <div class="input-group">
                            <label for="center-email">Email ID</label>
                            <input type="email" id="center-email" name="centerEmail">
                        </div>
                        <div class="input-group">
                            <label for="center-key-facilities">Key Facilities</label>
                            <textarea id="center-key-facilities" name="centerKeyFacilities" rows="3"></textarea>
                            <small>List key facilities, comma-separated or one per line.</small>
                        </div>
                        <div class="input-group">
                            <label for="center-order">Order</label>
                            <input type="number" id="center-order" name="centerOrder" min="1" value="1" required>
                        </div>
                        <div class="form-actions">
                            <button type="submit" id="center-save-button" class="btn">Save Center</button>
                            <button type="button" id="center-cancel-edit-button" class="btn btn-secondary" style="display: none;">Cancel Edit</button>
                        </div>
                        <div id="centers-status" style="margin-top: 15px;"></div>
                    </form>
                </div>
                <div class="list-container">
                    <h3>Existing Centers</h3>
                    <ul id="centers-list">
                        <!-- Centers will be dynamically loaded here -->
                        <li class="list-item-placeholder">No centers found. Add one using the form.</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="../scripts/firebase-config.js"></script>
    <script src="dashboard.js"></script>
    <!-- Chart.js for bar graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Navigation logic for dashboard sections
        document.querySelectorAll('nav .nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('nav .nav-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.querySelectorAll('main > section').forEach(sec => sec.style.display = 'none');
                const sectionId = this.getAttribute('data-section');
                const section = document.getElementById(sectionId);
                if (section) section.style.display = '';
            });
        });

        // Utility to get average from localStorage
        function updateAverageLoadTime(newTime) {
            let times = JSON.parse(localStorage.getItem('siteLoadTimes') || '[]');
            times.push(newTime);
            if (times.length > 20) times = times.slice(-20); // keep last 20 loads
            localStorage.setItem('siteLoadTimes', JSON.stringify(times));
            const avg = times.length ? (times.reduce((a, b) => a + b, 0) / times.length) : 0;
            return avg;
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('dashboard-home').style.display = '';
            document.querySelectorAll('main > section:not(#dashboard-home)').forEach(sec => sec.style.display = 'none');

            // Calculate and display average load time in real-time
            setTimeout(() => {
                const perf = window.performance.timing;
                let loadTime = 0;
                if (perf.loadEventEnd && perf.navigationStart && perf.loadEventEnd > perf.navigationStart) {
                    loadTime = (perf.loadEventEnd - perf.navigationStart) / 1000;
                } else {
                    loadTime = (performance.now() / 1000);
                }
                const avgLoadTime = updateAverageLoadTime(loadTime);
                document.getElementById('widget-performance').textContent = avgLoadTime && !isNaN(avgLoadTime) ? avgLoadTime.toFixed(2) + 's' : '0.00s';
            }, 100);

            // Google Analytics site views (using Google Analytics Data API via backend)
            // Replace the fetch URL with your backend endpoint that returns site views
            fetch('https://your-backend.example.com/api/analytics/site-views')
                .then(res => res.json())
                .then(data => {
                    let siteViews = data.siteViews || 0;
                    document.getElementById('widget-site-views').textContent = siteViews;
                })
                .catch(() => {
                    document.getElementById('widget-site-views').textContent = '0';
                });

            // Clicks (placeholder, set to 0 if not available)
            let siteClicks = 0;
            // If you fetch from backend, replace siteClicks with actual value
            document.getElementById('widget-clicks').textContent = siteClicks;

            // Bar graph for performance (showing last 4 load times)
            const ctx = document.getElementById('performance-bar-graph').getContext('2d');
            let times = JSON.parse(localStorage.getItem('siteLoadTimes') || '[]');
            const last4 = times.slice(-4);
            let barData = [0, 0, 0, 0];
            if (last4.length === 4) {
                barData = last4.map(t => Number(t).toFixed(2));
            }
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Load 1', 'Load 2', 'Load 3', 'Load 4'],
                    datasets: [{
                        label: 'Load Time (s)',
                        data: barData,
                        backgroundColor: [
                            'rgba(38,182,182,0.7)',
                            'rgba(0,128,128,0.7)',
                            'rgba(38,182,182,0.5)',
                            'rgba(0,128,128,0.5)'
                        ],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#008080' },
                            grid: { color: '#e0f2f1' }
                        },
                        x: {
                            ticks: { color: '#008080' },
                            grid: { color: '#e0f2f1' }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
